--- unsetenv.c.orig	2008-11-13 21:50:23.000000000 -0200
+++ unsetenv.c	2008-11-13 21:50:42.000000000 -0200
@@ -32,6 +32,11 @@
 # endif
 #endif
 
+#ifdef __APPLE__
+#include <crt_externs.h>
+#define environ (*_NSGetEnviron())
+#endif
+
 #if _LIBC
 /* This lock protects against simultaneous modifications of `environ'.  */
 # include <bits/libc-lock.h>
